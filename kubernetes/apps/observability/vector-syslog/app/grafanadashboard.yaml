---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/grafana.integreatly.org/grafanadashboard_v1beta1.json
apiVersion: grafana.integreatly.org/v1beta1
kind: GrafanaDashboard
metadata:
  name: network-device-logs
spec:
  allowCrossNamespaceImport: true
  instanceSelector:
    matchLabels:
      grafana.internal/instance: grafana
  datasources:
    - datasourceName: VictoriaLogs
      inputName: DS_LOKI
  json: |-
    {
      "title": "Network Device Logs",
      "uid": "network-device-logs",
      "timezone": "browser",
      "schemaVersion": 38,
      "version": 4,
      "refresh": "30s",
      "time": {
        "from": "now-1h",
        "to": "now"
      },
      "panels": [
        {
          "title": "Network Device Logs Stream",
          "type": "logs",
          "gridPos": {"h": 24, "w": 24, "x": 0, "y": 0},
          "targets": [
            {
              "expr": "log_source:network_device | limit 500",
              "refId": "A",
              "queryType": "instant",
              "editorMode": "code",
              "datasource": {
                "type": "victoriametrics-logs-datasource",
                "uid": "${DS_LOKI}"
              }
            }
          ],
          "options": {
            "showTime": true,
            "showLabels": true,
            "showCommonLabels": false,
            "wrapLogMessage": true,
            "prettifyLogMessage": false,
            "enableLogDetails": true,
            "sortOrder": "Descending",
            "dedupStrategy": "none"
          }
        }
      ],
      "annotations": {
        "list": []
      }
    }
