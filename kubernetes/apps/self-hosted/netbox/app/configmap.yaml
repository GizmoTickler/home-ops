---
apiVersion: v1
kind: ConfigMap
metadata:
  name: netbox-oidc-config
data:
  oidc.yaml: |
    # OIDC Configuration for PocketID
    AUTHENTICATION_BACKENDS:
      - social_core.backends.open_id_connect.OpenIdConnectAuth
      - netbox.authentication.ObjectPermissionBackend

    # Auto-create users from OIDC
    SOCIAL_AUTH_AUTO_CREATE_USERS: true

    # Map OIDC claims to user attributes
    SOCIAL_AUTH_OIDC_USERNAME_KEY: preferred_username

    # OIDC scopes
    SOCIAL_AUTH_OIDC_SCOPE:
      - openid
      - profile
      - email
